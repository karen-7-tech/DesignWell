<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Campus Virtual - Java</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="campus.css">
</head>
<body>

<nav class="navbar">
  <span class="navbar-text">Bienvenido al Campus EducaciónIT</span>
  <div class="dropdown">
    <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" href="#" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-person-circle user-icon"></i>
      <span class="ms-2">Usuario</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownUser">
      <li><a class="dropdown-item" href="#"><i class="bi bi-journal-text me-2"></i>Mis cursos</a></li>
      <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i>Salir</a></li>
    </ul>
  </div>
</nav>

<div class="campus-container">
  <aside class="sidebar">
    <h4>Java</h4>
    <ul class="list-group" id="lista-modulos"></ul>
  </aside>

  <main class="content d-flex flex-column justify-content-center align-items-center text-center">
    <div id="pantalla-inicial">
      <h2>Bienvenid@ al Curso de Java</h2>
      <p class="mt-3">
        En este curso aprenderás Java desde lo más básico hasta conceptos avanzados.
        Contamos con <strong>5 módulos</strong> que incluyen:
      </p>
      <ul class="text-start mx-auto" style="max-width:500px;">
        <li>Introducción a Java y conceptos básicos</li>
        <li>Variables, tipos de datos y operadores</li>
        <li>Control de flujo (if, else, switch)</li>
        <li>Estructuras repetitivas (for, while, do-while)</li>
        <li>Arreglos y colecciones (List, Map, Set)</li>
      </ul>
      <p class="mt-3">
        Ante cualquier duda, podés escribir al correo de la profesora <strong>María Lopez</strong>: 
        <a href="mailto:maria.lopez@educacionit.com">maria.lopez@educacionit.com</a>
      </p>
      <button id="btn-comenzar" class="btn btn-primary mt-3">Comenzar</button>
    </div>

    <div id="contenido-curso" style="display:none; width:100%;">
      <h2 id="titulo-leccion"></h2>
      <div id="contenido-leccion"></div>
      <div class="d-flex justify-content-end">
        <button id="btn-siguiente" class="btn btn-primary mt-3" onclick="siguienteTema()" disabled>Siguiente</button>
      </div>
    </div>

    <button id="btn-evaluacion" class="btn btn-warning mt-3" onclick="window.location.href='prueba.html'" style="display:none;">
      Realizar Evaluación Final
    </button>
  </main>
</div>

<script>
const curso = [
  {
    titulo: "Módulo 1: Introducción a Java",
    temas: [
      {
        titulo: "Instalación y Configuración de Java",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/Ax3VVcJxpzI?list=PL2Z95CSZ1N4GD4wqgXMiujfSVuG2xBP9P" title="Video Instalación y Configuración de Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container text-center" style="max-width: 800px; margin: 0 auto;">
              <h3>Instalar y Configurar Java en tu Equipo</h3>
              <p>
                En este tema aprenderás a instalar Java JDK y configurar correctamente el entorno para comenzar a programar. Configuraremos las variables de entorno y aprenderemos a usar el compilador y el intérprete de Java desde la terminal.
              </p>
              <p>
                Ante cualquier duda, puedes comunicarte con el profesor 
                <a href="mailto:maria.lopez@educacionit.com" style="text-decoration: none; color: #0d6efd; display: inline-flex; align-items: center; gap: 5px;">
                  <i class="bi bi-envelope-fill"></i> maria.lopez@educacionit.com
                </a>
              </p>
            </div>
          </div>`
      },
      {
        titulo: "Primeros Programas y Sintaxis Básica",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/Cs5ymoNkrX8" title="Video Primeros Programas en Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Aprenderás la estructura básica de un programa Java, el método main, la sintaxis general y cómo compilar y ejecutar tus primeros programas.</p>
            </div>
          </div>`
      }
    ]
  },
  {
    titulo: "Módulo 2: Programación Orientada a Objetos y Estructuras de Datos",
    temas: [
      {
        titulo: "Conceptos de Programación Orientada a Objetos",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/Cdr4wTz0Wro" title="Video Conceptos de POO en Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Verás qué son clases, objetos, atributos y métodos en Java, así como los pilares de la POO: encapsulamiento, herencia y polimorfismo.</p>
            </div>
          </div>`
      },
      {
        titulo: "Colecciones y Estructuras de Datos",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/vJTeIJx_Kn0" title="Video Estructuras de Datos en Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Aprenderás a utilizar arreglos, listas, mapas y otras colecciones de Java para gestionar datos de forma eficiente.</p>
            </div>
          </div>`
      }
    ]
  },
  {
    titulo: "Módulo 3: Desarrollo de Aplicaciones",
    temas: [
      {
        titulo: "Entrada y Salida de Datos",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/Ifg_JzetpU4" title="Video Entrada y Salida en Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Cómo leer y escribir datos desde la consola, archivos y otras fuentes usando Java.</p>
            </div>
          </div>`
      },
      {
        titulo: "Manejo de Excepciones y Depuración",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/pwVppK3RgyI" title="Video Excepciones en Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Verás cómo manejar errores en tiempo de ejecución utilizando try-catch-finally y crear tus propias excepciones personalizadas.</p>
            </div>
          </div>`
      }
    ]
  },
  {
    titulo: "Módulo 4: Aplicaciones Completas",
    temas: [
      {
        titulo: "Construcción de Interfaces Gráficas",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/pPG66_BZ8-c" title="Video Interfaces Gráficas en Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Aprenderás a crear interfaces gráficas con Java Swing/JavaFX para desarrollar aplicaciones de escritorio completas.</p>
            </div>
          </div>`
      },
      {
        titulo: "Conexión a Bases de Datos",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/WTgFsYc-RaA" title="Video Conexión a Bases de Datos con Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Cómo conectar tus aplicaciones Java a bases de datos usando JDBC para realizar operaciones CRUD.</p>
            </div>
          </div>`
      }
    ]
  },
  {
    titulo: "Módulo 5: Buenas Prácticas y Optimización",
    temas: [
      {
        titulo: "Buenas Prácticas de Programación en Java",
        contenido: `
          <div class="tema-contenido">
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/L1oMLsiMusQ" title="Video Buenas Prácticas en Java" allowfullscreen></iframe>
            </div>
            <div class="descripcion-container">
              <h3>¿Qué aprenderás?</h3>
              <p>Aplicar convenciones de nombres, patrones de diseño y técnicas de refactorización para mantener tu código limpio y mantenible.</p>
            </div>
          </div>`
      }
    ]
  }
];


let moduloActual = 0;
let temaActual = 0;

const listaModulos = document.getElementById('lista-modulos');
const tituloLeccion = document.getElementById('titulo-leccion');
const contenidoLeccion = document.getElementById('contenido-leccion');
const btnSiguiente = document.getElementById('btn-siguiente');
const btnComenzar = document.getElementById('btn-comenzar');

// Inicializar estado de módulos y temas
curso.forEach((modulo, i) => {
  modulo.habilitado = false;
  modulo.temas.forEach((tema, j) => {
    tema.hecho = false;
    tema.habilitado = false; // controlar tema individual
  });
});

// Cargar módulos en sidebar
function cargarModulos() {
  listaModulos.innerHTML = "";
  curso.forEach((modulo, i) => {
    const li = document.createElement('li');
    li.classList.add('list-group-item');
    if(!modulo.habilitado) li.classList.add('deshabilitado');

    const todosHechos = modulo.temas.every(tema => tema.hecho);
    const iconoCheck = todosHechos ? `<i class="bi bi-check2 modulo-completo"></i>` : "";

    li.innerHTML = `
      <a class="modulo-link" data-bs-toggle="collapse" href="#modulo${i}" role="button" aria-expanded="false" aria-controls="modulo${i}">
        ${modulo.titulo} ${iconoCheck} <i class="bi bi-chevron-down"></i>
      </a>
      <ul class="list-group collapse" id="modulo${i}"></ul>
    `;
    listaModulos.appendChild(li);

    const ulTemas = li.querySelector('ul');
    modulo.temas.forEach((tema, j) => {
      const temaLi = document.createElement('li');
      temaLi.classList.add('list-group-item', 'tema-item');
      temaLi.textContent = tema.titulo;

      if(tema.habilitado) {
        temaLi.style.cursor = 'pointer';
        temaLi.style.opacity = '1';
        temaLi.onclick = () => mostrarTema(i, j);
      } else {
        temaLi.style.cursor = 'not-allowed';
        temaLi.style.opacity = '0.5';
      }

      ulTemas.appendChild(temaLi);
    });
  });

  // Mostrar botón Evaluación Final si todos los módulos están completos
  const todosCompletos = curso.every(mod => mod.temas.every(t => t.hecho));
  const btnEvaluacion = document.getElementById('btn-evaluacion');
  btnEvaluacion.style.display = todosCompletos ? 'block' : 'none';
}

// Mostrar tema
function mostrarTema(m, t) {
  if(!curso[m].habilitado || !curso[m].temas[t].habilitado) {
    alert("Debes completar los temas anteriores primero.");
    return;
  }

  moduloActual = m;
  temaActual = t;
  const tema = curso[m].temas[t];
  tituloLeccion.textContent = tema.titulo;

  // Mostrar el contenido de la lección sin incluir el botón PDF
  contenidoLeccion.innerHTML = tema.contenido;

  // Contenedor de botones debajo del contenido
  let botonesHTML = `<button class="btn btn-success" id="btn-hecho">Marcar como hecho</button>`;

  // Solo mostrar botón PDF si es Módulo 2 (índice 1) y Tema “Tipos de datos” (índice 1)
  if(m === 1 && t === 1) {
    botonesHTML += `<button class="btn btn-primary" id="btn-pdf" onclick="window.open('Material/EjerciciosJava.pdf', '_blank')">Ver PDF de práctica</button>`;
  }

  // Creamos el contenedor de botones fuera del marco blanco
  const contenedorBotones = document.createElement('div');
  contenedorBotones.id = 'botones-leccion';
  contenedorBotones.className = 'd-flex gap-2 mt-3 justify-content-end';
  contenedorBotones.innerHTML = botonesHTML;

  contenidoLeccion.appendChild(contenedorBotones);

  // Botón siguiente
  btnSiguiente.disabled = true;
  if(m === curso.length - 1 && t === curso[m].temas.length - 1){
    btnSiguiente.style.display = 'none'; // último tema del último módulo
  } else {
    btnSiguiente.style.display = 'inline-block';
    btnSiguiente.disabled = true;
  }

  // Evento del botón "Marcar como hecho"
  document.getElementById('btn-hecho').onclick = () => marcarComoHecho(m, t);
}

// Marcar tema como hecho
function marcarComoHecho(m, t) {
  curso[m].temas[t].hecho = true;
  btnSiguiente.disabled = false;

  // desbloquear siguiente tema dentro del mismo módulo
  if(t + 1 < curso[m].temas.length) {
    curso[m].temas[t + 1].habilitado = true;
  } else if(m + 1 < curso.length) {
    // desbloquear siguiente módulo y su primer tema
    curso[m + 1].habilitado = true;
    curso[m + 1].temas[0].habilitado = true;
  }

  cargarModulos();
}

// Botón siguiente
function siguienteTema() {
  if(temaActual < curso[moduloActual].temas.length - 1){
    mostrarTema(moduloActual, temaActual + 1);
  } else if(moduloActual < curso.length - 1){
    mostrarTema(moduloActual + 1, 0);
  } else {
    btnSiguiente.disabled = true;
  }
}

// Botón comenzar
btnComenzar.onclick = () => {
  document.getElementById('pantalla-inicial').style.display = 'none';
  document.getElementById('contenido-curso').style.display = 'block';
  curso[0].habilitado = true;
  curso[0].temas[0].habilitado = true; // desbloquea el primer tema
  cargarModulos();
  mostrarTema(0,0);
};

// Inicializar sidebar
cargarModulos();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
